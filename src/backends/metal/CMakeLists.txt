enable_language(OBJC)
enable_language(OBJCXX)
file(GLOB SOURCE_FILES *.cpp *.mm *.h)
add_library(metal_backend SHARED ${SOURCE_FILES})
target_compile_options(metal_backend PRIVATE $<$<OR:$<COMPILE_LANGUAGE:OBJC>,$<COMPILE_LANGUAGE:OBJCXX>>:-fobjc-arc>)
target_link_libraries(metal_backend PRIVATE luisarender::core "-framework Foundation" "-framework Metal" "-framework MetalPerformanceShaders")
target_link_libraries(backends INTERFACE metal_backend)
